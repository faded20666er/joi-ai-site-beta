<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIPER | EXCLUSIVE</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@300;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #ff0f5b;
            --accent: #00f2ea;
            --gold: #ffd700;
            --dark: #050505;
            --glass-panel: rgba(20, 20, 20, 0.7);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body {
            background-color: var(--dark);
            background-image: radial-gradient(circle at 50% 0%, #1a0b14 0%, #000 100%);
            color: #eee;
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding-bottom: 100px;
            min-height: 100vh;
        }

        /* PREMIUM HEADER */
        header {
            display: flex; justify-content: space-between; align-items: center; 
            padding: 20px 30px;
            background: rgba(0,0,0,0.8); 
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--glass-border); 
            position: sticky; top: 0; z-index: 100;
        }
        
        .logo { 
            font-size: 1.8rem; font-weight: 700; color: #fff; 
            font-family: 'Cinzel', serif; letter-spacing: 2px;
            text-shadow: 0 0 10px rgba(255, 15, 91, 0.5);
            cursor: pointer; user-select: none;
        }
        
        .cta-btn {
            background: linear-gradient(90deg, var(--primary), #990033);
            color: #fff; padding: 10px 25px; border-radius: 30px; 
            text-decoration: none; font-weight: 600; font-size: 0.9rem;
            box-shadow: 0 0 20px rgba(255, 15, 91, 0.4);
            border: 1px solid rgba(255,255,255,0.2);
            transition: 0.3s; display: flex; align-items: center; gap: 8px;
        }
        .cta-btn:hover { transform: scale(1.05); box-shadow: 0 0 30px rgba(255, 15, 91, 0.8); }

        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }

        /* VIDEO PLAYER */
        .video-frame {
            position: relative; border-radius: 12px; overflow: hidden;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            border: 1px solid var(--glass-border);
            background: #000;
        }
        
        .video-overlay {
            position: absolute; top: 20px; left: 20px; z-index: 10;
            background: rgba(0,0,0,0.6); backdrop-filter: blur(4px);
            padding: 5px 12px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1);
            display: flex; align-items: center; gap: 8px; cursor: pointer;
        }
        .dot { width: 8px; height: 8px; background: #ff0000; border-radius: 50%; box-shadow: 0 0 10px #ff0000; animation: blink 1.5s infinite; }
        .live-text { font-size: 0.75rem; font-weight: 700; letter-spacing: 1px; }

        video { width: 100%; display: block; max-height: 70vh; }

        /* GALLERY GRID */
        .section-title { 
            font-family: 'Cinzel', serif; margin-top: 40px; margin-bottom: 20px; 
            font-size: 1.5rem; border-bottom: 1px solid #333; padding-bottom: 10px;
            display: flex; justify-content: space-between; align-items: center;
        }
        
        .grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
        }
        
        .card {
            position: relative; aspect-ratio: 2/3; background: #111;
            border-radius: 8px; overflow: hidden; cursor: pointer;
            transition: 0.3s; border: 1px solid #222;
        }
        .card:hover { transform: translateY(-5px); border-color: var(--primary); }
        .card img { width: 100%; height: 100%; object-fit: cover; opacity: 0.8; transition: 0.3s; }
        .card:hover img { opacity: 1; transform: scale(1.05); }
        
        .lock-icon {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 2rem; color: rgba(255,255,255,0.8);
            background: rgba(0,0,0,0.5); padding: 15px; border-radius: 50%;
            backdrop-filter: blur(5px);
        }

        /* CHAT SYSTEM */
        .chat-float {
            position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px;
            background: var(--primary); border-radius: 50%; 
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 10px 30px rgba(255, 15, 91, 0.4);
            cursor: pointer; z-index: 200; transition: 0.3s;
            animation: pulse-border 2s infinite;
        }
        .chat-float:hover { transform: scale(1.1); }

        .chat-window {
            display: none; position: fixed; bottom: 100px; right: 30px;
            width: 380px; height: 650px; background: rgba(15, 15, 15, 0.95);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border); border-radius: 20px;
            flex-direction: column; overflow: hidden; z-index: 200;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }
        @media(max-width: 500px) { .chat-window { width: 90%; right: 5%; bottom: 20px; height: 80vh; } .chat-float { display: none; } }

        .chat-top {
            padding: 15px; background: rgba(255,255,255,0.03); border-bottom: 1px solid rgba(255,255,255,0.05);
            display: flex; align-items: center; gap: 15px; position: relative;
        }
        .avatar { width: 45px; height: 45px; border-radius: 50%; object-fit: cover; border: 2px solid var(--primary); }
        
        .model-select-btn {
            font-size: 0.7rem; background: #333; padding: 4px 8px; border-radius: 4px; 
            cursor: pointer; margin-left: 10px; border: 1px solid #555;
        }
        
        /* MODEL SELECTOR DROPDOWN */
        .model-menu {
            display: none; position: absolute; top: 60px; left: 0; right: 0;
            background: #111; border-bottom: 1px solid var(--primary);
            z-index: 50; padding: 10px; grid-template-columns: 1fr 1fr 1fr; gap: 5px;
        }
        .model-choice {
            text-align: center; cursor: pointer; padding: 5px; border-radius: 5px; border: 1px solid transparent;
        }
        .model-choice:hover { background: #222; border-color: #555; }
        .model-choice img { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; margin-bottom: 5px; }
        .model-choice span { display: block; font-size: 0.7rem; color: #fff; }

        .msgs { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }
        
        .bubble {
            max-width: 80%; padding: 12px 16px; border-radius: 18px; font-size: 0.9rem; line-height: 1.5;
            position: relative; animation: slideUp 0.3s ease;
        }
        .bubble.bot { align-self: flex-start; background: #222; color: #ddd; border-bottom-left-radius: 4px; }
        .bubble.user { align-self: flex-end; background: var(--primary); color: #fff; border-bottom-right-radius: 4px; }
        
        .input-zone {
            padding: 15px; background: rgba(0,0,0,0.4); border-top: 1px solid rgba(255,255,255,0.05);
            display: flex; gap: 10px; align-items: center;
        }
        .txt-in {
            flex: 1; background: rgba(255,255,255,0.05); border: none; color: #fff;
            padding: 12px 20px; border-radius: 25px; outline: none; font-family: inherit;
        }
        .icon-btn {
            background: transparent; border: none; color: #666; cursor: pointer; font-size: 1.1rem;
        }
        .icon-btn.active { color: var(--accent); }
        .send-btn {
            background: var(--primary); border: none; width: 45px; height: 45px; border-radius: 50%;
            color: #fff; cursor: pointer; transition: 0.2s; display: flex; align-items: center; justify-content: center;
        }

        /* MODALS */
        .modal-bg {
            display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9);
            z-index: 1000; align-items: center; justify-content: center;
            backdrop-filter: blur(5px);
        }
        .modal-card {
            background: #111; border: 1px solid var(--glass-border); padding: 40px;
            width: 100%; max-width: 400px; text-align: center; border-radius: 20px;
            box-shadow: 0 0 50px rgba(255, 15, 91, 0.1);
        }

        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.4; } }
        @keyframes pulse-border { 0% { box-shadow: 0 0 0 0 rgba(255, 15, 91, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(255, 15, 91, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 15, 91, 0); } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <header>
        <div class="logo" id="admin-trigger" onclick="handleLogoClick()">JOI<span style="color:var(--primary)">.AI</span></div>
        <a href="#" onclick="goLive()" class="cta-btn"><i class="fas fa-video"></i> <span>WATCH LIVE</span></a>
    </header>

    <div class="container">
        <div class="video-frame">
            <div class="video-overlay" onclick="goLive()">
                <div class="dot"></div> <span class="live-text">LIVE NOW</span>
            </div>
            <video id="main-player" controls autoplay muted loop playsinline poster="img1.jpg">
                <source src="1.mp4" type="video/mp4">
            </video>
        </div>

        <div style="text-align: center; margin-top: 20px;">
            <button class="cta-btn" style="margin: 0 auto; padding: 15px 40px; font-size: 1.1rem;" onclick="openPay()">
                UNLOCK VIP ACCESS
            </button>
        </div>

        <div class="section-title">
            <span>EXCLUSIVE ARCHIVE</span>
            <span style="font-size:0.8rem; color:#666;">128 FILES</span>
        </div>

        <div class="grid" id="gallery-grid"></div>
    </div>

    <!-- FLOATING CHAT -->
    <div class="chat-float" onclick="toggleChat()">
        <i class="fas fa-comment-alt" style="color:#fff; font-size: 24px;"></i>
    </div>

    <div class="chat-window" id="chat-win">
        <div class="chat-top">
            <img src="https://i.pravatar.cc/150?u=viper" class="avatar" id="current-avatar">
            <div>
                <div style="font-weight: 700;" id="current-name">Mistress Viper</div>
                <div style="font-size: 0.75rem; color: #00f2ea;">‚óè Online</div>
            </div>
            <div class="model-select-btn" onclick="toggleModelMenu()"><i class="fas fa-users"></i> Change</div>
            <div style="flex:1"></div>
            <i class="fas fa-times" style="cursor:pointer; color:#666;" onclick="toggleChat()"></i>
        </div>
        
        <!-- MODEL MENU -->
        <div class="model-menu" id="model-menu">
            <div class="model-choice" onclick="setModel('viper')">
                <img src="https://i.pravatar.cc/150?u=viper"><span>Viper (Dom)</span>
            </div>
            <div class="model-choice" onclick="setModel('angel')">
                <img src="https://i.pravatar.cc/150?u=angel"><span>Angel (GFE)</span>
            </div>
            <div class="model-choice" onclick="setModel('jade')">
                <img src="https://i.pravatar.cc/150?u=jade"><span>Jade (Sassy)</span>
            </div>
        </div>

        <div class="msgs" id="chat-box"></div>
        <div class="input-zone">
            <button class="icon-btn active" id="voice-btn" onclick="toggleVoice()" title="Toggle Voice"><i class="fas fa-volume-up"></i></button>
            <input type="text" class="txt-in" id="chat-in" placeholder="Type here..." autocomplete="off" onkeypress="if(event.key==='Enter') send()">
            <button class="send-btn" onclick="send()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <!-- PAYMENT MODAL -->
    <div class="modal-bg" id="pay-modal">
        <div class="modal-card">
            <h2 style="font-family:'Cinzel'; color:var(--gold); margin-top:0;">VIP ACCESS</h2>
            <p style="color:#aaa; font-size:0.9rem; margin-bottom: 30px;">
                Secure access to the full archive and private shows.
            </p>
            <div style="background:#222; padding:15px; border-radius:10px; margin-bottom:15px; cursor:pointer; border:1px solid #333;" onclick="goLive()">
                <div style="font-weight:bold; color:#fff;">üì∫ LIVE CAMS (Instant)</div>
                <div style="font-size:0.8rem; color:#666;">Verified 18+ Access</div>
            </div>
            <div style="background:#222; padding:15px; border-radius:10px; margin-bottom:15px; cursor:pointer; border:1px solid #333;" onclick="toggleCrypto()">
                <div style="font-weight:bold; color:var(--gold);">üîê CRYPTO / CASHAPP ($20)</div>
                <div style="font-size:0.8rem; color:#666;">Lifetime Archive Access</div>
            </div>
            <div id="crypto-box" style="display:none; text-align:left; background:#000; padding:15px; font-size:0.8rem; border-radius:8px; word-break:break-all;">
                <p><strong>BTC:</strong> <span id="btc">bc1qxy2kgdygjrsqtzq2n0yrf2493p83kkfjhx0wlh</span></p>
                <p><strong>CashApp:</strong> $YOUR_TAG</p>
                <p style="color:#666; font-size:0.7rem;">Email proof to vip@site.com</p>
            </div>
            <div style="margin-top:20px; color:#666; cursor:pointer; font-size:0.8rem;" onclick="document.getElementById('pay-modal').style.display='none'">Close Window</div>
        </div>
    </div>

    <!-- HIDDEN API KEY MODAL -->
    <div class="modal-bg" id="key-modal">
        <div class="modal-card" style="border-color: var(--accent);">
            <h3 style="color:#fff;">üîß SYSTEM ADMIN</h3>
            <p style="color:#aaa;">Enter OpenRouter API Key:</p>
            <input type="password" id="api-key-input" style="width:100%; padding:10px; background:#222; border:1px solid #444; color:#fff; border-radius:5px; margin-bottom:15px;">
            <button class="cta-btn" style="width:100%; justify-content:center;" onclick="saveKey()">SAVE KEY</button>
        </div>
    </div>

    <script>
        // CONFIG
        const REPO_USER = "faded20666er";
        const REPO_NAME = "joi-ai-site-beta";
        const AFFILIATE_LINK = "https://t.acrsmartcam.com/396104/3664/0?bo=Array&file_id=300184&po=6533&aff_sub5=SF_006OG000004lmDN&aff_sub4=AT_0002";

        // MODEL DATA
        const MODELS = {
            'viper': {
                name: "Mistress Viper",
                avatar: "https://i.pravatar.cc/150?u=viper",
                pitch: 0.8,
                prompt: "You are Mistress Viper. You are dominant, confident, and seductive. You are here to build a connection with your submissive. Flirt, tease, and degrade them slightly. Do NOT constantly ask them to go to the live site. Only mention the live cam if they ask for nudity or video. Otherwise, focus on conversation."
            },
            'angel': {
                name: "Angel",
                avatar: "https://i.pravatar.cc/150?u=angel",
                pitch: 1.2,
                prompt: "You are Angel. You are a sweet, bubbly 19-year-old college girl. You love your fans and want to be their girlfriend. You use emojis. You are shy but naughty. Only mention your live cam if they ask to see you naked. Be chatty and cute."
            },
            'jade': {
                name: "Jade",
                avatar: "https://i.pravatar.cc/150?u=jade",
                pitch: 1.0,
                prompt: "You are Jade. You are an ebony queen, sassy and high energy. You call the user 'baby' or 'honey'. You are direct and fun. You like to party. Only send them to the live cam if things get really hot."
            }
        };

        // STATE
        let currentModel = 'viper';
        let clickCount = 0;
        let voiceEnabled = true;
        let chatHist = [];

        // INIT
        scanRepo();
        setModel('viper');

        // FUNCTIONS
        function goLive() { window.open(AFFILIATE_LINK, '_blank'); }
        function openPay() { document.getElementById('pay-modal').style.display = 'flex'; }
        function toggleCrypto() { 
            const b = document.getElementById('crypto-box');
            b.style.display = b.style.display === 'block' ? 'none' : 'block';
        }

        function toggleChat() {
            const w = document.getElementById('chat-win');
            const f = document.querySelector('.chat-float');
            if(w.style.display === 'flex') {
                w.style.display = 'none';
                if(window.innerWidth > 500) f.style.display = 'flex';
            } else {
                w.style.display = 'flex';
                f.style.display = 'none';
            }
        }

        // MODEL SWITCHER
        function toggleModelMenu() {
            const m = document.getElementById('model-menu');
            m.style.display = m.style.display === 'grid' ? 'none' : 'grid';
        }

        function setModel(id) {
            currentModel = id;
            const m = MODELS[id];
            
            // Update UI
            document.getElementById('current-name').innerText = m.name;
            document.getElementById('current-avatar').src = m.avatar;
            document.getElementById('model-menu').style.display = 'none';
            
            // Reset Chat
            const box = document.getElementById('chat-box');
            box.innerHTML = '';
            chatHist = [{ role: "system", content: m.prompt }];
            
            // Greeting
            setTimeout(() => {
                let greet = "Hello.";
                if(id === 'viper') greet = "I'm waiting... impress me.";
                if(id === 'angel') greet = "Hi! üíï I'm so bored in my dorm...";
                if(id === 'jade') greet = "Hey baby, you ready for this?";
                addMsg(greet, 'bot');
                speak(greet);
            }, 500);
        }

        // TEXT TO SPEECH
        function toggleVoice() {
            voiceEnabled = !voiceEnabled;
            const btn = document.getElementById('voice-btn');
            btn.className = voiceEnabled ? 'icon-btn active' : 'icon-btn';
            btn.innerHTML = voiceEnabled ? '<i class="fas fa-volume-up"></i>' : '<i class="fas fa-volume-mute"></i>';
        }

        function speak(text) {
            if(!voiceEnabled || !window.speechSynthesis) return;
            // Cancel previous speech
            window.speechSynthesis.cancel();

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.pitch = MODELS[currentModel].pitch;
            utterance.rate = 1.0;
            
            // Try to find a female voice
            const voices = window.speechSynthesis.getVoices();
            const female = voices.find(v => v.name.includes('Female') || v.name.includes('Zira') || v.name.includes('Samantha') || v.name.includes('Google US English'));
            if(female) utterance.voice = female;

            window.speechSynthesis.speak(utterance);
        }

        // HIDDEN ADMIN MENU
        function handleLogoClick() {
            clickCount++;
            if(clickCount === 3) {
                document.getElementById('key-modal').style.display = 'flex';
                document.getElementById('api-key-input').value = localStorage.getItem('viper_key') || '';
                clickCount = 0;
            }
            setTimeout(() => clickCount = 0, 1000);
        }

        function saveKey() {
            const k = document.getElementById('api-key-input').value.trim();
            if(k) {
                localStorage.setItem('viper_key', k);
                alert("Key Saved! Chat should work now.");
                document.getElementById('key-modal').style.display = 'none';
            }
        }

        // CHAT LOGIC
        async function send() {
            const i = document.getElementById('chat-in');
            const txt = i.value.trim();
            if(!txt) return;

            addMsg(txt, 'user');
            i.value = '';

            const key = localStorage.getItem('viper_key');
            if(!key) {
                setTimeout(() => addMsg("‚ö†Ô∏è SYSTEM ERROR: Admin Key Missing. Triple-click the logo to fix.", 'bot'), 500);
                return;
            }

            // Real API Call
            chatHist.push({ role: "user", content: txt });
            try {
                const r = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                    method: "POST",
                    headers: {
                        "Authorization": `Bearer ${key}`,
                        "Content-Type": "application/json",
                        "HTTP-Referer": window.location.href,
                    },
                    body: JSON.stringify({
                        "model": "gryphe/mythomax-l2-13b",
                        "messages": chatHist,
                        "temperature": 0.9,
                        "max_tokens": 150
                    })
                });
                const d = await r.json();
                if(d.error) throw d.error;
                const reply = d.choices[0].message.content;
                chatHist.push({ role: "assistant", content: reply });
                
                addMsg(reply, 'bot');
                speak(reply);

            } catch(e) {
                console.error(e);
                addMsg("Connection failed.", 'bot');
            }
        }

        function addMsg(txt, who) {
            const d = document.createElement('div');
            d.className = `bubble ${who}`;
            d.innerText = txt;
            const b = document.getElementById('chat-box');
            b.appendChild(d);
            b.scrollTop = b.scrollHeight;
        }

        // GALLERY SCANNER
        async function scanRepo() {
            const g = document.getElementById('gallery-grid');
            try {
                const r = await fetch(`https://api.github.com/repos/${REPO_USER}/${REPO_NAME}/contents/`);
                const f = await r.json();
                g.innerHTML = '';
                f.forEach(file => {
                    const n = file.name.toLowerCase();
                    if((n.endsWith('.jpg')||n.endsWith('.webp')||n.endsWith('.mp4')) && !n.includes('audio')) {
                        const c = document.createElement('div');
                        c.className = 'card';
                        
                        if(n.endsWith('.mp4')) {
                            c.innerHTML = `<video src="${file.download_url}" muted loop onmouseover="this.play()" onmouseout="this.pause()"></video>`;
                            c.onclick = () => { document.getElementById('main-player').src = file.download_url; document.getElementById('main-player').play(); window.scrollTo(0,0); };
                        } else {
                            c.innerHTML = `<img src="${file.download_url}"><div class="lock-icon"><i class="fas fa-lock"></i></div>`;
                            c.onclick = openPay;
                        }
                        g.appendChild(c);
                    }
                });
            } catch(e) { console.log(e); }
        }
    </script>
</body>
</html>

